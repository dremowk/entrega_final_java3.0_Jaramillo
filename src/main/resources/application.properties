# -------------------------
# Server
# -------------------------
server.port=8080

# -------------------------
# Datasource (MySQL)
# -------------------------
spring.datasource.url=jdbc:mysql://localhost:3306/facturacion_db?createDatabaseIfNotExist=true&serverTimezone=UTC&useSSL=false&allowPublicKeyRetrieval=true&characterEncoding=utf8
spring.datasource.username=root
# Usar variable de entorno para la contraseña (mejor práctica). Ejemplo: export DB_PASSWORD="miPass"
spring.datasource.password=20525Lore.
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP (pool de conexiones por defecto en Spring Boot)
spring.datasource.hikari.pool-name=HikariPool-Facturacion
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
# Validación de conexión
spring.datasource.hikari.connection-test-query=SELECT 1

# -------------------------
# JPA / Hibernate
# -------------------------
# Para desarrollo usar "create" o "update". Para producción normalmente "none" o gestionarlo con flyway/liquibase.
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
# Nuevo generator mappings (evita warnings con algunos generadores de id)
spring.jpa.properties.hibernate.id.new_generator_mappings=true
# Evitar fetch N+1 a la hora de debug por logs muy grandes:
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# -------------------------
# Inicialización de scripts (schema.sql / data.sql)
# -------------------------
# Spring Boot 2.5+ usa spring.sql.init.* para inicializar
spring.sql.init.mode=always
# Ubicaciones por defecto: classpath:resources/schema.sql y classpath:resources/data.sql
# Si quieres ficheros externos:
# spring.sql.init.schema-locations=classpath:db/schema.sql
# spring.sql.init.data-locations=classpath:db/data.sql

# -------------------------
# Transacciones / Timezone
# -------------------------
# Ajusta la zona horaria según tu entorno (usuario en Europe/Madrid)
spring.jackson.time-zone=Europe/Madrid
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# -------------------------
# Spring profiles (útiles para separar dev/prod)
# -------------------------
#spring.profiles.active=dev

# -------------------------
# Logging y formato de salida
# -------------------------
# Mostrar parámetros en logs (cuidado con datos sensibles)
#logging.level.org.springframework=INFO
#logging.file.name=logs/facturacion.log

# -------------------------
# Mail (si lo necesitas más adelante)
# -------------------------
#spring.mail.host=smtp.example.com
#spring.mail.port=587
#spring.mail.username=
#spring.mail.password=

# -------------------------
# Seguridad: recomendaciones
# -------------------------
# 1) No commit: application.properties si contiene credenciales.
# 2) Usa variables de entorno o Spring Cloud Config / Vault para prod.
# 3) Para DB en producción, usar user con permisos mínimos.

# -------------------------
# Extras útiles
# -------------------------
# Habilitar actuator (si lo agregas como dependencia)
#management.endpoints.web.exposure.include=health,info,metrics

# -------------------------
# Fin
# -------------------------
